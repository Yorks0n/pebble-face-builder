services:
  - type: web
    name: pebbleface-runner
    env: node
    plan: starter
    buildCommand: >-
      apt-get update &&
      apt-get install -y --no-install-recommends python3-pip python3-venv libsdl1.2debian libfdt1 &&
      pip install uv &&
      uv tool install pebble-tool &&
      pebble sdk install latest &&
      export PATH="$HOME/.local/bin:$PATH" &&
      pnpm install --frozen-lockfile &&
      pnpm build
    startCommand: pnpm start
    healthCheckPath: /healthz
    envVars:
      - key: MAX_CONCURRENCY
        value: "1"
      - key: BUILD_TIMEOUT_SEC
        value: "120"
      - key: MAX_ZIP_BYTES
        value: "26214400"
      - key: MAX_UNZIP_BYTES
        value: "104857600"
